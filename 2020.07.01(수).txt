2020.07.01(수)
공부를 위한 Apple Web 사이트 클론코딩 시작.
html 파일 생성
html 파일에서 나누어지는 <head> 태그와 <body> 태그 중 <head> 태그에 관한 학습이다.
도움이 될수 있는 사이트: https://blog.ab180.co/open-graph-as-a-website-preview/

우리가 보고 있는 웹사이트는 기본적으로 HTML문서이다. 이 HTML 문서는 크게 head와 body라는 두 부분으로 구성이 되어있다. 이중에서 head태그 안에는 그 웹페이지를 구성하는 여러가지 CSS, JavaScript 코드조각들이나
참조 링크등이 들어 있고, 가장 중요하게는 오늘 다룰 메타 데이터들이 HTML 문서의 meta 태그에 담겨 있다.
여기서 말하는 메타 데이터란 쉽게 말하면 해당 웹페이지를 구성하는 여러 구조화된 정보들로 예컨데 제목, 설명, 이미지 등을 아예 명시적으로 웹페이지 쪽에서 직접 정해서 표기해 준 것을 말한다.
직접 표기해 주어야 하는 이유는 크롤러도 하나의 소프트웨어 프로그램이어서 HTML문서를 보면 자동으로 무엇이 어떤것에 해당하는 정보인지 판별하기가 어렵기 때문이다.
이러한 메타 데이터를 표기하는 방법은 기본 HTML5의 title,description 태그를 이용하는 기본 방법을 제외한 제3의 방법중에서 비교적 통일되고 인정된 방법으로 그 종류에는 페이스북의 오픈그래프(Open Graph)프로토콜이 있고,
이 오픈 그래프 프로토콜이 우리가 보는 미리보기 화면의 실체를 구성하는 메타 데이터 표기방법이다.


<head></head> 안의 <link> tag의 rel 속성에 대해서 파악
------------
<link rel="canonical" href="https://www.apple.com/kr/"> 여기서 "canonical" 에 해당하는 부분
캐노니컬 태그는 쉽게 말해 검색엔진에게 비슷하거나 중복되는 콘텐츠 페이지에 대해 어떤 페이지가 오리지널인지 알려주는 역할.(검색엔진 최적화와 연관)
캐노니컬 태그는 테크니컬 SEO 체크 항목중 하나라고 한다.

캐노니컬 태그란 rel="canonical"이라는 속성(attribute)을 가지고 있는 HTML <head></head> 상의 태그를 뜻한다.
웹 페이지 HTML 코드 상에 캐노니컬 태그를 지정하게 되면 검색엔진 크롤러에게 선호 URL(혹은 대표 URL)이 무엇인지 명시하게 된다.
여기서 선호 URL 명시는, 중복되거나 같은 콘텐츠를 가진 여러 페이지(여러 URL)가 존재할 때 어떤 페이지가 오리지널 페이지인지, 어떤 페이지를 크롤링하고, 색인해야 하는지에 대한 정보를 제공하는 것이다.
캐노니컬 태그가 검색엔진 최적화에 있어서 중요한 이유는 크게 네가지로 들수가 있다.

1. 중복/ 동일 콘텐츠 페널티 방지: 만약 아메리카노가 궁금해져 '아메리카노'라는 검색어로 구글에서 검색을 했는데 검색 결과 화면에 똑같은 내용을 가진 10개의 다른페이지가 노출되면 만족도가 떨어진다.
			      구글은 이를 방지하기 위해 중복되는 콘텐츠를 무분별하게 확산해 노출을 늘리는 어뷰징 행위(또는 블랙햇 SEO)를 막기위해 URL상에 중복/콘텐츠가 있다면 패널티를 부과한다.
			      불가피하게 이런 상황을 피할 수 없다면 캐노니컬 태그를 오리지널 콘텐츠(오리지널 콘텐츠를 가지고 있는 페이지)에 적용함으로써 해결할 수 있다. 중복되는 콘텐츠가 있더라도,
			      캐노니컬 태그를 지정해 오리지널 콘텐츠를 지정해서 알려주고, 패널티를 방지할 수 있다.

2. 모바일 페이지 대표 URL 지정 : 웹사이트를 운영하다 보면, 같은 웹페이지임에도 불구하고 여러가지 이유로 URL이 바뀌게 되는 경우가 있다. 대표적으로 모바일 페이지나 AMP페이지의 경우이다. 이런경우,
			     검색엔진의 입장에서 URL이 다르면 별개의 페이지로 인지하고 모바일 페이지에 패널티를 부과할 가능성이 있다. 이런 경우에 모바일 웹페이지 HTML의 <head></head> 상에 
			     올바르게 캐노니컬을 지정해 패널티를 방지할 뿐 아니라 SEO 밸류(트래픽, 백링크 점수 등)이 분산되지 않도록 설정할 수 있다.

3. 변환 URL, 단축 URL SEO 밸류 통일 : 검색엔진은 만약 URL이 다르다면 다른 페이지로 인식하게 되고 트래픽, 도메인 신뢰도, URL 신뢰도 등 검색엔진 상위 랭킹을 위한 SEO 밸류가 분산되어 상위 랭킹 노출이
				어려워지거나, 최악의 경우 중복콘텐트로 색인 삭제 패널티를 받을 수도 있다. 이런 상황에서 캐노니컬 태그를 올바르게 지정해 준다면 SEO 밸류를 한곳으로 통일할 수 있다.

4. 다양한 채널을 통한 콘텐츠 배포 : 다른 채널이나 다른 웹사이트를 통해 내가 작성한 블로그 포스팅등의 콘텐츠를 배포할 때, 오리지널 포스트의 URL을 공유된 웹사이트/채널 페이지 HTML상의 <head></head>안에 적용시키면 컨텐츠 중복과 상대적으로 
			         낮은 도메인 신뢰도로 인한 문제를 방지해 더욱 효과적인 콘텐츠 배포를 할 수 있다.  

이와 같이 캐노니컬 태그는 검색엔진 최적화와 검색엔진 상위 랭킹 노출을 위해서 매우 중요한 태그이다.

다음은 올바른 캐노니컬 태그 적용방법이다.
1.캐노니컬 태그는 오리지널 페이지의 URL을 적용한다.
2.캐노니컬 태그는 PC 버전 페이지 URL을 적용한다(모바일 페이지가 오리지널인 경우 반대).
3.캐노니컬 태그는 도메인 간 적용도 가능하다(Cross-domain canonical).
-----------

다음은 rel 속성에서 "alternate" 에 대해서 알아보도록 하겠다.

"alternate"는 대체 버전의 문서 ( 인쇄 페이지, 번역 또는 미러)에 대한 링크를 제공한다.
즉, 검색엔진(user)에게 같은 내용을 가지고 있지만 (언어나 모바일 버전등의 이유로) 다른 URL을 나타낸다는것을 알려주는 요소이다.
이와 같이 사용되는 "hreflang"은 서로 다른 언어 또는 지역별로 여러 버전의 페이지가 있는 경우 검색엔진에게 여러 페이지 버전을 알려주는 것이다. 이렇게 하면 검색엔진이 언어나 지역별로 가장 적절한 버전의 페이지를 사용자에게 제공해 줄 수 있다.

----------


다음은 meta 태그의 name="viewport" 에 대해서 알아보도록 하겠다.
반응형 웹을 구현하기 위해서 데스크탑 pc 스마트폰 태블릿등 접속하는 디스플레이의 종류에 따라서 화면의 크기가 자동으로 변하도록 해주어야 한다.
이때 모바일 웹등을 구현하기 위해서 viewport 라는것을 고려하게 된다. 뷰포트는 웹페이지가 사용자에게 보여지는 영역을 말한다. 데스크탑 pc에서 브라우저의 크기를 줄이면 웹페이지의 내용이 다보여지지는 않고 스크롤을 해서 봐야하는 경우가 있다.
이때도 브라우저에 보여지는 부분이 viewport이다. 즉, 데스크탑 pc는 브라우저의 크기를 바꾸어서 viewport 크기를 바꿀수가 있는 것이다.
이와는 반대로 휴대폰이나 태블릿의 경우에는 브라우저의 크기를 변경할 수 없는것이 일반적이다. 또한 이것들의 크기도 다양하기 때문에 자연스럽게 viewport의 크기도 다양해 지는것이다.
데스크탑 pc만 존재할 때는 웹페이지를 데스크탑 pc용으로만 만들어 고정된 크기를 가지는 것이 대부분이었다. 이렇게 고정된 크기를 가지게 된다면 웹페이지가 작은 휴대폰에서는 한화면에 다 보이지 않게된다.
대부분의 모바일 기기의 웹브라우저에서 웹페이지가 그려지는 렌더링 영역은 사용자에게 보여지는 영역인 viewport 보다 크다. 그래서 모바일 웹브라우저가 취하는 기본적인 정책은 모두를 보여주기 위해서 화면을 줄여서 보여주는 것인데, 이는 글자가 작아져서 보기어려워지는 단점이 있다.
이때 HTML5 에서 제공하는 <meta> 태그를 사용하면 모바일 기기에서 실제 렌더링되는 영역과 viewport의 크기를 조절할 수 있다. 또한 줌 레벨도 조정이 가능하다.
 
- width=device-width :  페이지의 너비를 기기의 스크린 너비로 설정한다. 즉, 렌더링 영역을 기기의 viewport 크기와 같게 만들어준다.
- initial-scale =1.0 : 처음 페이지 로딩시 확대/축소가 되지 않은 원래 크기를 사용하도록 한다. 0~10 사이의 값을 가진다.
- minimum-scale : 줄일 수 있는 최소 크기를 지정한다. 0~10 사이의 값을 가진다.
- maximum-scale : 늘릴 수 있는 최대 크기를 지정한다. 0~10 사이의 값을 가진다.
- user-scalable : yes 또는 no 값을 가지며 사용자가 화면을 확대/축소 할수 있는 지를 지정한다.

위에서 줌 레벨은 1이 원래크기이고, 0.5라면 50% 축소를 뜻하게 된다.

아이폰과 같이 노치가 존재하는 모바일 환경에서는 웹사이트가 Portrait 모드에서는 정상적으로 출력이되나,
Landscape로 바꾸게 되면 웹의 화면이 상단의 노치부분을 자동으로 패딩으로 밀어내게 된다. 이때 전체화면 모드를 위해서 "viewport-fit=cover" 를 하게되면 꽉찬화면으로 볼수 있다.
----------
다음은 meta 태그의 name="description" 에 대해서 알아보면,
이 요소는 해당 페이지의 설명을 적어 넣는 것이다. 검색시에 페이지 제목 아래에 페이지 내용의 요약이 적혀져있는 부분을 볼수가 있는데 이것이 그분에 반영이 되는 항목이다.
----------

다음은 meta 태그의 <meta property = "og:url"> 의 og에 해당하는 오픈그래프(Open graph)에 대해서 알아보자.
오픈 그래프는 간단히 말하면 소셜 미디어등에서 우리가 자주 보는 링크에서 볼 수 있는 미리보기 화면의 실체를 구성하는 메타 데이터 표기 방법이다. 즉 이는 사용자가 링크를 클릭하기 전에 미리 해당 웹사이트를 크롤러가 방문해 html head의 메타 데이터 크롤링해서 미리보기 화면을 생성해 주는것이다.
그 구체적인 작동원리는 다음과 같다.

1.사용자가 링크를 입력창에 입력합니다.
2.페이스북, 네이버 블로그, 카카오톡은 입력창의 문자열이 "링크"라는 것을 파악합니다. (흔히 말하는 정규표현식으로 해당 문자열이 링크라는 것을 알아냅니다.)
3.링크라는 것이 파악되면 페이스북, 네이버 블로그, 카카오톡의 크롤러는 미리 그 웹사이트를 방문해서 HTML head의 오픈그래프(Open Graph) 메타 데이터를 긁어옵니다.
4.이중에서도 og:title, og:description, og:image가 각각 제목, 설명, 이미지의 정보를 나타냅니다.
5.그리고 그 정보를 바탕으로 미리보기 화면을 생성해주게 됩니다.

오픈 그래프에서 사용하는 다양한 property에 대해서 알아보면 
og:title -  사이트의 제목 태그
og:type - 사이트 종류 스타일
og:image - 사이트를 나타낼 대표 이미지
og:url - 사이트의 대표 url
og:description - 사이트의 설명
og:locale - 사이트의 언어선택, 기본값은 en_US 이고 한글의 경우는 ko_KR 이다.
og:locale:alternate - 사이트의 다른 언어 종류로 다국적 사이트일 때 적용하는 태그이다.
og:site_name - 전체 사이트는 title로 표시하면 site_name은 좀더 세부적인 카테고리를 나타낸다.

이와 같이 다양한 property가 존재한다.